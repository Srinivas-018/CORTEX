[supervisord]
nodaemon=true

[program:streamlit]
command=streamlit run /app/app.py --server.port 8501 --server.address 0.0.0.0
directory=/app
user=root
autostart=true
autorestart=true
startsecs=5
stderr_logfile=/var/log/streamlit.err.log
stdout_logfile=/var/log/streamlit.out.log
redirect_stderr=true
stopasgroup=true
killasgroup=true
environment=PATH="/usr/local/bin:/usr/bin:/bin"

# Keep FastAPI and React entries present but disabled to avoid supervisor auto-restarting failures
[program:fastapi]
; original command (kept for reference): uvicorn app.main:app --host 0.0.0.0 --port 8000
command=/bin/true
autostart=false
autorestart=false
redirect_stderr=true
stdout_logfile=/var/log/fastapi_disabled.log

[program:react]
; original command (kept for reference): serve -s build -l 3000
command=/bin/true
autostart=false
autorestart=false
redirect_stderr=true
stdout_logfile=/var/log/react_disabled.log
